Git基礎知識　1.5
0から始めるGitワークショップ　34
本会の目的
–
•	Gitの基本的な知識を知ろう
•	Github + SourceTreeで基本的な動作を試そう
最初に
–
Gitは思想・概念的にも構造も詳しく理解しようと思うと、かなり複雑にできています。
なので
–
•	知識としてGit用語を馴染ませる
•	実際に動かして解像度を上げる
を目標に本会は進行します。
もちろん興味があればより詳細な勉強を進めていくのはアリです。
バージョン管理の基本
突然ですが
皆さんいろんな立場でさまざまな
データを作成/更新していると思います
こういうファイル
作ったことないですか？
 
私はあります
こんな時、昔更新した内容とか覚えてます？
覚えてられないですよね
バージョン管理とは
–
ファイルの変更を記録し、
その変更履歴を管理することです
何がメリットか
–
バージョン管理を行うことで、
いつ・だれが・どのファイルを・どのように変更したか
が記録され、変更の追跡ができるようになります。
具体的には
–
•	過去の更新内容の確認
•	更新によって発生した問題の原因特定
•	変更される前のファイルを復元
することが可能です。
これができるシステムを
バージョン管理システム
(Version Control System)
と呼びます。
バージョン管理システム(VCS)を導入することで
–
•	最新バージョンがどれかわからない…
•	更新前の正常な状態に戻せない…
•	戻した時に誤って必要なファイルを消してしまった…
といった問題を解決できます。
特に、複数のメンバーがさまざまなファイルを編集するような環境では特に効果を発揮します。  
出典：Gitが、おもしろいほどわかる基本の使い方33 改訂新版 P11
Git(ぎっと)は
–
その中で現在もっとも利用されているVCSです。
Gitの説明
Gitによるバージョン管理の利点
•	いつ誰がどのファイルのどの箇所を、どういった目的で作成、変更、削除したかという履歴を残し共有することができる
•	過去の状態を確認、復元できる
•	誤って重要なファイルを削除してしまった場合でも、削除したファイルを復元することができる
Git用語説明（簡易版）
用語1：リポジトリ(repository)
リポジトリとは、Gitがバージョン管理下におく箱を指します。 リポジトリには
•	ローカルリポジトリ
•	リモートリポジトリ
の2種類があります。
１つのリモートリポジトリに対して、複数人がローカルリポジトリを持つ構造になります。
 
出典：【Git入門】初めに知るべき仕組み・基本知識 全まとめ【これだけでOK】：https://26gram.com/git-basics
用語2：コミット(commit)
コミットとはユーザーが変更の履歴を記録する作業を指します。
コミットは時系列のつながりを持っており、順々に記録されるので、コミットを過去に遡ることができ、ファイルをコミットの単位で戻すことができます。
用語3：コミットメッセージ
コミットには必ず「コミットメッセージ」というコメントをつける必要があります。
誰にもわかりやすいコミットメッセージをつけることで、履歴がよりわかりやすくなるのです。
 Gitを利用した作業は基本的に「修正→コミット」の繰り返しです。ユーザーはコミットメッセージを参考に、コミット時のファイル状態を確認できます。 
出典：Gitが、おもしろいほどわかる基本の使い方33 改訂新版 P12
用語4：プッシュ(Push)
ローカルリポジトリのコミット内容をリモートリポジトリに反映する作業を指す。
[作業→コミット→プッシュ]
が一番シンプルな流れです。
用語5：プル(pull)
リモートリポジトリのコミット内容をローカルリポジトリに反映し、ローカルブランチにリモートブランチの内容をマージする作業を指す。
死ぬほど細かい話
※厳密なプッシュの逆はフェッチ(fetch)
pull = fetch + merge
この辺りは今回は詳しくやらないです。
用語6：ブランチ(branch)
ブランチとは修正履歴を意図的に枝分かれさせて記録する機能です。
たとえば、メインの開発をマスターブランチとして、それとは別にサブ的な機能を分けて開発を進める、あるいはバグフィックスを切り分けて行うというような場合に、ブランチを分けて開発を進めることができます。
ブランチはいくつでも作ることができます。ブランチによって枝分かれした履歴は、他のブランチの影響を受けることはなく、ブランチごとに作業を進めることができます。  
出典：Gitが、おもしろいほどわかる基本の使い方33 改訂新版 P16
開発ブランチから機能別の修正ブランチに派生するパターンもある  
出典：GitHubのforkはリポジトリの複製 フォークの手順と、クローン、ブランチとの違い：
https://style.potepan.com/articles/31067.html
番外用語：フォーク(Fork)
ブランチではなく、リポジトリごと複製することをフォークと呼ぶ。
リポジトリ管理機能そのものを複製して持つことになるため、例えばクライアントのリポジトリをナディアがフォークして持つなどという形でプロジェクトとして利用するケースは現実的ではない。
OSS開発ではバグ潰し参加者として使用されるが、基本的にはオリジナルのリポジトリ所有者との関係性も踏まえ、慎重に行う必要がある。
用語7：マージ(merge)
マージとは枝分かれしたブランチを結合する機能です。元となるブランチから作業のブランチに枝分かれし、作業が完了したら元のブランチにマージして、一つにまとめることができます。  
出典：Gitが、おもしろいほどわかる基本の使い方33 改訂新版 P16
用語8：プルリクエスト
(pull request)
略してプルリク。
gitというよりGithubから生まれた言葉かつ機能。
Gitlabではマージリクエストと呼ぶ。呼び方が違うだけで意味は同じ。
ここの命名基準はサービスの思想が絡むので割愛。
コードなどを追加・修正した際、リモートリポジトリへの反映を他の開発者に依頼する機能。「変更を本人以外がレビューしてから反映させる」という手順を容易に実現することができる。
変更の反映にプルリクエストを利用することにより、プロジェクトメンバーの間で相互に修正点をレビューしながら開発を進めることができるようになる。
用語9：クローン(Clone)
主にリモートリポジトリの内容をコピーしてローカルリポジトリを作成する意図で使われる
例：既に開発進行中のプロジェクトに途中参加する際、現状のリモートリポジトリの内容を全てローカルリポジトリにコピーし、新しく作業に入る。
用語10：コンフリクト(conflict)
Gitにおいて、コミット履歴を持つ2つ以上のブランチを統合する場合には、競合 = コンフリクト が起こる場合があります。
例えば2つのブランチをマージする際に両方のブランチで同じ行を編集している場合はコンフリクトが発生するため、Gitは自動的にマージをせずに開発者自身にコンフリクトの解消を求めます。
コンフリクトしていない場合はGitが自動的にマージを行い、コミットもされます。コンフリクトしている場合は、競合の解消、解消後のマージの両方を開発者自身が行う必要があります。
コンフリクトを起こさないために…
•	複数人で同じファイルを編集しない
•	ブランチ（ファイル）を常に最新の状態に保つ
用語11：チェックアウト(checkout)　２
Gitのチェックアウト(checkout)とは、一言で言うと「ブランチを切り替えたいとき」に使用するコマンドです。
つまり、今作業しているブランチから退出して、新たに他の作業ブランチで作業をしたい場合に使用するためのコマンドです。
GitとこれまでのVCSとの違い
 VCSの主な種類として「集中型」と「分散型」 
の2種類に分類されます。
集中型
 
「集中型」はサーバに一つの中央リポジトリが設置され利用者はそれに対してチェックアウトとコミットを行うことで開発を進めます。
このため、情報取得にも、作業コミットにも必ず中央サーバに接続する必要があります。
分散型
 
「分散型」はそれぞれ端末ごとにローカルのリポジトリが作成されます。集中型が一つの中央リポジトリで管理されるのに対し、複数のリポジトリが作成されるので、分散型と呼ばれます。
分散型
 
自分の端末に作成したローカルリポジトリに対してはいつでもコミットが可能なので、リモートリポジトリにプッシュしたり、リモートリポジトリからプルしたりする作業を除けば、オフラインでも作業が可能です。
分散型
 
また、複数のリポジトリが作成されることで、どこかのリポジトリが破損した場合にも、比較的容易位に復旧することが可能です。
座学ここまで。
10分休憩して実際にGitを触ってみましょう。
それではSourceTreeを使って作業してみよう
事前準備は終わってます？
【超初心者向け】GitHubとSourcetreeの連携方法
https://note.com/yubune_log/n/n6bc8d414c588
1点、事前準備で修正するところがあるので一緒にやりましょう。 記事のままだとクローンorプルする時にエラーが出る可能性が高いです。
SourceTreeでGitHubのPersonal access tokensを利用する方法
https://zenn.dev/koushikagawa/articles/3c35e503c8553a
失敗する人はBasicで試しましょう。アクセストークンは一緒で大丈夫です。
GitHubのアクセストークンを利用してSourceTreeとの連携をおこなう
https://zenn.dev/murakamiiii/articles/fba44e65b8558f
【超初心者向け】GitHubとSourcetreeの連携方法2 https://note.com/yubune_log/n/n8c92b78a716b
ローカルリポジトリにファイルを追加
基本操作「コミット」
基本操作「プッシュ」
基本操作「プル」
基本操作「ブランチを切る」
基本操作「ブランチをマージする」
基本操作「コンフリクトを起こしてみよう」
ナディアでエンジニアチームが定めているGit運用フローを見てみましょう
https://docs.google.com/presentation/d/1uZfGHXzQVsTod-HW95WN19ZOLIJ0kFdXdZ39AJGXvEs/edit#slide=id.g3be2e9ffdd_2_58
今村さんが組んでるgit自動デプロイ機能を読んでみよう。 https://nadia.backlog.jp/alias/wiki/1075109127
参考図書
 
本ワークショップは以上になります。
おつかれさまでした
追ってアンケートをお送りしますので、是非ご意見ご感想をいただき今後の参考にさせていただけますと幸いです。

